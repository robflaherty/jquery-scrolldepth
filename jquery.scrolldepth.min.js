/*!
 * @preserve
 * jquery.scrolldepth.js | v0.8
 * Copyright (c) 2015 Rob Flaherty (@robflaherty)
 * Licensed under the MIT and GPL licenses.
 */
!function(e,n,t,r){"use strict";var o,a,l,i,c={minHeight:0,elements:[],percentage:!0,userTiming:!0,pixelDepth:!0,nonInteraction:!0,gaGlobal:!1,gtmOverride:!1,baseLine:!1},u=e(n),g=[],h=0;e.scrollDepth=function(r){function p(e,t){i?i({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:e,eventLabel:"Baseline",eventValue:1,eventNonInteraction:!0}):(o&&n[l]("send","event","Scroll Depth",e,"Baseline",1,{nonInteraction:!0}),a&&_gaq.push(["_trackEvent","Scroll Depth",e,"Baseline",1,!0]))}function s(e,t,c,u){i?(i({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:e,eventLabel:t,eventValue:1,eventNonInteraction:r.nonInteraction}),r.pixelDepth&&arguments.length>2&&c>h&&(h=c,i({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:"Pixel Depth",eventLabel:D(c),eventValue:1,eventNonInteraction:r.nonInteraction})),r.userTiming&&arguments.length>3&&i({event:"ScrollTiming",eventCategory:"Scroll Depth",eventAction:e,eventLabel:t,eventTiming:u})):(o&&(n[l]("send","event","Scroll Depth",e,t,1,{nonInteraction:r.nonInteraction}),r.pixelDepth&&arguments.length>2&&c>h&&(h=c,n[l]("send","event","Scroll Depth","Pixel Depth",D(c),1,{nonInteraction:r.nonInteraction})),r.userTiming&&arguments.length>3&&n[l]("send","timing","Scroll Depth",e,u,t)),a&&(_gaq.push(["_trackEvent","Scroll Depth",e,t,1,r.nonInteraction]),r.pixelDepth&&arguments.length>2&&c>h&&(h=c,_gaq.push(["_trackEvent","Scroll Depth","Pixel Depth",D(c),1,r.nonInteraction])),r.userTiming&&arguments.length>3&&_gaq.push(["_trackTiming","Scroll Depth",e,u,t,100])))}function v(e){return{"25%":parseInt(.25*e,10),"50%":parseInt(.5*e,10),"75%":parseInt(.75*e,10),"100%":e-5}}function f(n,t,r){e.each(n,function(n,o){-1===e.inArray(n,g)&&t>=o&&(s("Percentage",n,t,r),g.push(n))})}function m(n,t,r){e.each(n,function(n,o){-1===e.inArray(o,g)&&e(o).length&&t>=e(o).offset().top&&(s("Elements",o,t,r),g.push(o))})}function D(e){return(250*Math.floor(e/250)).toString()}function d(e,n){var t,r,o,a=null,l=0,i=function(){l=new Date,a=null,o=e.apply(t,r)};return function(){var c=new Date;l||(l=c);var u=n-(c-l);return t=this,r=arguments,0>=u?(clearTimeout(a),a=null,l=c,o=e.apply(t,r)):a||(a=setTimeout(i,u)),o}}var y=+new Date;r=e.extend({},c,r),e(t).height()<r.minHeight||(r.gaGlobal?(o=!0,l=r.gaGlobal):"function"==typeof ga?(o=!0,l="ga"):"function"==typeof __gaTracker&&(o=!0,l="__gaTracker"),"undefined"!=typeof _gaq&&"function"==typeof _gaq.push&&(a=!0),"function"==typeof r.eventHandler?i=r.eventHandler:"undefined"==typeof dataLayer||"function"!=typeof dataLayer.push||r.gtmOverride||(i=function(e){dataLayer.push(e)}),r.baseLine&&(r.percentage?p("Percentage"):r.elements&&p("Elements")),u.on("scroll.scrollDepth",d(function(){var o=e(t).height(),a=n.innerHeight?n.innerHeight:u.height(),l=u.scrollTop()+a,i=v(o),c=+new Date-y;return g.length>=4+r.elements.length?void u.off("scroll.scrollDepth"):(r.elements&&m(r.elements,l,c),void(r.percentage&&f(i,l,c)))},500)))}}(jQuery,window,document);