/*!
 * @preserve
 * standalone.scrolldepth.js | v0.5
 * Copyright (c) 2014 Rob Flaherty (@robflaherty)
 * Licensed under the MIT and GPL licenses.
 */
!function(e,t){"use strict";function n(e){e=e||{};for(var t=1;t<arguments.length;t++)if(arguments[t])for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e}function r(e,t){if("number"==typeof e.length)for(var n=0;n<e.length;n++)t(e[n],n);else for(var r in e)e.hasOwnProperty(r)&&t(e[r],r)}function a(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),!0):e.attachEvent?e.attachEvent("on"+t,function(){n.call(e)}):void 0}function i(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent("on"+t,n)}function o(e,t,n){if("indexOf"in t)return t.indexOf(e,n);for(var r=n||0;r<t.length;r++)if(t[r]===e)return r;return-1}function l(t){return t==e?t.innerHeight:t.nodeType==t.DOCUMENT_NODE?t.documentElement.scrollHeight:Math.round(t.getBoundingClientRect().height)}function u(t){return t==e?e.pageYOffset:t.nodeType==t.DOCUMENT_NODE?t.documentElement.scrollTop:t.scrollTop}function c(e){return e.offsetWidth>0&&e.offsetHeight>0}var g,s,h,p={minHeight:0,elements:[],percentage:!0,userTiming:!0,pixelDepth:!0,trackHidden:!1},f=[],v=0;e.scrollDepth=function(d){function m(e,t,n,r){h?(dataLayer.push({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:e,eventLabel:t,eventValue:1,eventNonInteraction:!0}),d.pixelDepth&&arguments.length>2&&n>v&&(v=n,dataLayer.push({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:"Pixel Depth",eventLabel:T(n),eventValue:1,eventNonInteraction:!0})),d.userTiming&&arguments.length>3&&dataLayer.push({event:"ScrollTiming",eventCategory:"Scroll Depth",eventAction:e,eventLabel:t,eventTiming:r})):(g&&(ga("send","event","Scroll Depth",e,t,1,{nonInteraction:1}),d.pixelDepth&&arguments.length>2&&n>v&&(v=n,ga("send","event","Scroll Depth","Pixel Depth",T(n),1,{nonInteraction:1})),d.userTiming&&arguments.length>3&&ga("send","timing","Scroll Depth",e,r,t)),s&&(_gaq.push(["_trackEvent","Scroll Depth",e,t,1,!0]),d.pixelDepth&&arguments.length>2&&n>v&&(v=n,_gaq.push(["_trackEvent","Scroll Depth","Pixel Depth",T(n),1,!0])),d.userTiming&&arguments.length>3&&_gaq.push(["_trackTiming","Scroll Depth",e,r,t,100])))}function D(e){return{"25%":parseInt(.25*e,10),"50%":parseInt(.5*e,10),"75%":parseInt(.75*e,10),"100%":e-5}}function y(e,t,n){r(e,function(e,r){-1===o(r,f)&&t>=e&&(m("Percentage",r,t,n),f.push(r))})}function E(n,a,i){r(n,function(n){var r=t.querySelector(n),l=r.getBoundingClientRect().top,u=c(r);r&&-1===o(n,f)&&(d.trackHidden||u)&&a>=l+e.pageYOffset&&(m("Elements",r.getAttribute("data-ga_event_label")||n,a,i),f.push(n))})}function T(e){return(250*Math.floor(e/250)).toString()}function S(e,t){var n,r,a,i=null,o=0,l=function(){o=new Date,i=null,a=e.apply(n,r)};return function(){var u=new Date;o||(o=u);var c=t-(u-o);return n=this,r=arguments,0>=c?(clearTimeout(i),i=null,o=u,a=e.apply(n,r)):i||(i=setTimeout(l,c)),a}}var L=+new Date;if(d=n({},p,d),!(l(t)<d.minHeight)){"function"==typeof ga&&(g=!0),"undefined"!=typeof _gaq&&"function"==typeof _gaq.push&&(s=!0),"undefined"!=typeof dataLayer&&"function"==typeof dataLayer.push&&(h=!0),m("Percentage","Baseline");var _=S(function(){var n=l(t),r=l(e),a=u(e)+r,o=D(n),c=+new Date-L;return f.length>=4+d.elements.length?void i(e,"scroll",_):(d.elements&&E(d.elements,a,c),void(d.percentage&&y(o,a,c)))},500);a(e,"scroll",_)}}}(window,document);